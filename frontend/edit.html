<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SlideGenius Pro with Distance Guides</title>
    <script src="./config.js?v=2"></script> <!-- Load config -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/jszip@3.10.1/dist/jszip.min.js"></script>
    <script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <!-- PDFKit for high-quality vector PDF generation -->
    <script src="https://cdn.jsdelivr.net/npm/pdfkit@0.13.0/js/pdfkit.standalone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/blob-stream@0.1.3/blob-stream.js"></script>

    <!-- Editor Styles - Modular CSS -->
    <!-- Base -->
    <link rel="stylesheet" href="css/base/variables.css">

    <!-- Layout -->
    <link rel="stylesheet" href="css/layout/toolbar/base.css">
    <link rel="stylesheet" href="css/layout/toolbar/buttons.css">
    <link rel="stylesheet" href="css/layout/toolbar/logo.css">
    <link rel="stylesheet" href="css/layout/canvas/base.css">
    <link rel="stylesheet" href="css/layout/canvas/grid.css">
    <link rel="stylesheet" href="css/layout/properties.css">
    <link rel="stylesheet" href="css/layout/slides.css">

    <!-- Features -->
    <link rel="stylesheet" href="css/features/presentation/base.css?v=2">
    <link rel="stylesheet" href="css/features/presentation/controls.css?v=2">
    <link rel="stylesheet" href="css/features/presentation/timeline.css?v=2">
    <link rel="stylesheet" href="css/features/connector/base.css">
    <link rel="stylesheet" href="css/features/connector/arrows.css">
    <link rel="stylesheet" href="css/features/connector/styles.css">
    <link rel="stylesheet" href="css/features/connector/controls.css">
    <link rel="stylesheet" href="css/features/guides.css">

    <!-- Components -->
    <link rel="stylesheet" href="css/components/elements/base.css">
    <link rel="stylesheet" href="css/components/elements/selection.css">
    <link rel="stylesheet" href="css/components/elements/resize.css">
    <link rel="stylesheet" href="css/components/elements/editing.css">
    <link rel="stylesheet" href="css/components/controls.css">
    <style>
        #saveIndicator {
            display: inline-flex !important;
            align-items: center;
            vertical-align: middle !important;
            margin-left: 12px;
            font-size: 14px;
            color: #10b981;
            padding: 0 !important;
        }

        #saveIndicator svg,
        #saveIndicator i,
        #saveIndicator .icon {
            vertical-align: middle !important;
            margin-right: 4px;
        }
    </style>
</head>

<body>
    <!-- Presentation Mode -->
    <div class="presentation-mode" id="presentationMode">
        <div class="presentation-click-zone left" id="presentationZoneLeft"></div>
        <div class="presentation-click-zone right" id="presentationZoneRight"></div>
        <div class="presentation-slide-container" id="presentationSlideContainer"></div>
        <div class="presentation-controls">
            <div style="display: flex; align-items: center; gap: 20px;">
                <button id="prevSlideBtn" title="Previous Slide (‚Üê)">‚óÄ</button>
                <span class="presentation-counter" id="presentationCounter">1 / 1</span>
                <button id="nextSlideBtn" title="Next Slide (‚Üí)">‚ñ∂</button>
            </div>
            <div style="display: flex; align-items: center; gap: 12px;">
                <button id="exitPresentation" title="Exit Presentation (ESC)">‚úï</button>
            </div>
        </div>
        <div class="presentation-timeline" id="presentationTimeline">
            <div class="timeline-track" id="timelineTrack">
                <div class="timeline-progress" id="timelineProgress"></div>
                <div class="timeline-slides" id="timelineSlides"></div>
                <div class="timeline-current-indicator" id="timelineIndicator"></div>
            </div>
        </div>
    </div>

    <div class="toolbar">
        <div class="toolbar-left">
            <button class="back-btn" onclick="window.location.href='projects.html'" title="Quay l·∫°i danh s√°ch d·ª± √°n">
                ‚Üê
            </button>
            <div class="project-name-display" id="projectNameDisplay" title="Click ƒë√∫p ƒë·ªÉ s·ª≠a t√™n d·ª± √°n">
                <span id="projectNameText">D·ª± √°n Ch∆∞a ƒë·∫∑t t√™n</span>
                <i class="edit-icon">‚úèÔ∏è</i>
            </div>
            <div class="btn-group-separator"></div>
            <div class="btn-group">
                <button id="toggleSlidesBtn" title="Thu g·ªçn/M·ªü r·ªông Slides">
                    <span class="toggle-icon">‚ò∞</span>
                    <span class="toggle-text">Slides</span>
                </button>
            </div>
        </div>

        <div class="toolbar-center">
            <div class="btn-group">
                <button id="selectBtn" class="active" style="display: none;">üéØ Ch·ªçn</button>
                <button id="textBtn">üìù VƒÉn b·∫£n</button>
            </div>

            <div class="btn-group-separator"></div>

            <div class="btn-group">
                <button id="exportAllPdfBtn" class="capture-btn" title="Xu·∫•t t·∫•t c·∫£ slides th√†nh PDF">üìÑ Xu·∫•t</button>
            </div>

            <div class="btn-group-separator"></div>

            <div class="btn-group">
                <div class="present-btn-wrapper">
                    <button id="presentBtn" title="B·∫Øt ƒë·∫ßu tr√¨nh chi·∫øu">‚ñ∂Ô∏è Tr√¨nh chi·∫øu</button>
                    <div class="present-dropdown" id="presentDropdown">
                        <div class="present-dropdown-item" data-action="from-start">
                            <span class="icon">‚èÆ</span>
                            <span class="label">T·ª´ ƒê·∫ßu</span>
                        </div>
                        <div class="present-dropdown-item" data-action="from-current">
                            <span class="icon">‚ñ∂Ô∏è</span>
                            <span class="label">T·ª´ Slide Hi·ªán T·∫°i</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="toolbar-right">
            <div class="btn-group">
                <button id="undoBtn" title="Ho√†n t√°c (Ctrl+Z)">‚Ü∂ Ho√†n t√°c</button>
                <button id="redoBtn" title="L√†m l·∫°i (Ctrl+Y)">‚Ü∑ L√†m l·∫°i</button>
                <span id="saveIndicator" style="color: #10b981; font-size: 14px; margin-left: 12px; display: none;"><svg
                        xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#10b981" viewBox="0 0 16 16"
                        style="vertical-align: middle; margin-right: 4px;">
                        <path
                            d="M13.485 1.929a1 1 0 0 1 0 1.414l-7.071 7.071a1 1 0 0 1-1.414 0L2.515 8.929a1 1 0 1 1 1.414-1.414l1.071 1.071 6.364-6.364a1 1 0 0 1 1.414 0z" />
                    </svg>ƒê√£ l∆∞u</span>
            </div>
            <div class="btn-group-separator"></div>

            <div class="btn-group">
                <button id="propertiesBtn">‚öôÔ∏è Thu·ªôc t√≠nh</button>
            </div>
            <div class="btn-group-separator"></div>

            <div class="btn-group">
                <button id="resetViewBtn">üîÑ ƒê·∫∑t l·∫°i View</button>
            </div>
            <div class="btn-group-separator"></div>

            <div class="btn-group">
                <button id="importBtn">üìÇ Nh·∫≠p</button>
            </div>
        </div>
    </div>

    <input type="file" id="importFile" accept=".html,text/html" style="display: none;" multiple>
    <input type="file" id="imageFile" accept="image/*" style="display: none;">
    <input type="file" id="videoFile" accept="video/*" style="display: none;">

    <div class="left-panels">
        <div class="left-panel-tabs">
            <div class="left-panel-tab active" data-tab="slides" data-target="slides-panel-content">
                <span class="tab-icon">üìä</span>
                <span class="tab-text">Slides</span>
            </div>
            <div class="left-panel-tab" data-tab="templates" data-target="templates-panel-content">
                <span class="tab-icon">üé®</span>
                <span class="tab-text">M·∫´u</span>
            </div>
            <div class="left-panel-tab" data-tab="elements" data-target="elements-panel-content">
                <span class="tab-icon">‚ú®</span>
                <span class="tab-text">Th√†nh ph·∫ßn</span>
            </div>
        </div>

        <div id="slides-panel-content" class="left-panel-content active">
            <div class="panel-header">
                <h3>Slides</h3>
                <div class="slide-controls">
                    <button id="newSlideBtn">+ M·ªõi</button>
                    <button id="duplicateSlideBtn">Nh√¢n b·∫£n</button>
                </div>
            </div>
            <div class="slides-list" id="slidesList"></div>
        </div>

        <div id="templates-panel-content" class="left-panel-content">
            <div class="panel-header">
                <h3>M·∫´u Slide</h3>
                <p style="font-size: 12px; color: #718096; margin-top: 5px;">K√©o m·∫´u v√†o canvas ƒë·ªÉ t·∫°o slide m·ªõi</p>
            </div>
            <div class="templates-content">
                <div class="template-category">
                    <div class="category-title">B·ªë c·ª•c C∆° b·∫£n</div>
                    <div class="template-grid">
                        <div class="template-item" draggable="true" data-template="title-slide">
                            <div class="template-preview"
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <div class="template-title">Ti√™u ƒë·ªÅ Slide</div>
                                <div class="template-subtitle">Ph·ª• ƒë·ªÅ ·ªü ƒë√¢y</div>
                            </div>
                            <div class="template-label">Ti√™u ƒë·ªÅ Slide</div>
                        </div>

                        <div class="template-item" draggable="true" data-template="content-slide">
                            <div class="template-preview" style="background: #ffffff; color: #333;">
                                <div class="template-header">N·ªôi dung</div>
                                <div class="template-bullets">
                                    <div>‚Ä¢ ƒêi·ªÉm 1</div>
                                    <div>‚Ä¢ ƒêi·ªÉm 2</div>
                                    <div>‚Ä¢ ƒêi·ªÉm 3</div>
                                </div>
                            </div>
                            <div class="template-label">N·ªôi dung</div>
                        </div>

                        <div class="template-item" draggable="true" data-template="two-column">
                            <div class="template-preview" style="background: #f7fafc;">
                                <div class="template-columns">
                                    <div class="template-col">Tr√°i</div>
                                    <div class="template-col">Ph·∫£i</div>
                                </div>
                            </div>
                            <div class="template-label">Hai C·ªôt</div>
                        </div>

                        <div class="template-item" draggable="true" data-template="image-content">
                            <div class="template-preview" style="background: #edf2f7;">
                                <div class="template-image-placeholder">üñºÔ∏è</div>
                                <div class="template-content-text">N·ªôi dung</div>
                            </div>
                            <div class="template-label">·∫¢nh + VƒÉn b·∫£n</div>
                        </div>
                    </div>
                </div>

                <div class="template-category">
                    <div class="category-title">B·ªë c·ª•c ƒê·∫∑c bi·ªát</div>
                    <div class="template-grid">
                        <div class="template-item" draggable="true" data-template="quote-slide">
                            <div class="template-preview" style="background: linear-gradient(45deg, #667eea, #764ba2);">
                                <div class="template-quote">"Tr√≠ch d·∫´n"</div>
                                <div class="template-author">- T√°c gi·∫£</div>
                            </div>
                            <div class="template-label">Tr√≠ch d·∫´n</div>
                        </div>

                        <div class="template-item" draggable="true" data-template="thank-you">
                            <div class="template-preview"
                                style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
                                <div class="template-center">C·∫£m ∆†n</div>
                            </div>
                            <div class="template-label">C·∫£m ∆†n</div>
                        </div>

                        <div class="template-item" draggable="true" data-template="blank-slide">
                            <div class="template-preview" style="background: #ffffff; border: 2px dashed #cbd5e0;">
                                <div class="template-center" style="color: #a0aec0;">Tr·ªëng</div>
                            </div>
                            <div class="template-label">Slide Tr·ªëng</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="elements-panel-content" class="left-panel-content">
            <div class="panel-header">
                <h3>Th√†nh ph·∫ßn Thi·∫øt k·∫ø</h3>
                <p style="font-size: 12px; color: #718096; margin-top: 5px;">Click ƒë·ªÉ th√™m th√†nh ph·∫ßn v√†o slide</p>
            </div>
            <div class="elements-content">
                <!-- Media Elements - Moved to top for easy access -->
                <div class="element-category">
                    <div class="category-title">üì± Import t·ª´ m√°y</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="image" title="Click ƒë·ªÉ ch·ªçn ·∫£nh t·ª´ m√°y t√≠nh">
                            <div class="element-icon">
                                <div class="media-placeholder"
                                    style="width: 24px; height: 18px; background: linear-gradient(45deg, #48bb78, #38a169); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: white;">
                                    üìÅ</div>
                            </div>
                            <div class="element-label">Th√™m ·∫¢nh</div>
                        </div>
                        <div class="element-item" data-element="video" title="Click ƒë·ªÉ ch·ªçn video t·ª´ m√°y t√≠nh">
                            <div class="element-icon">
                                <div class="media-placeholder"
                                    style="width: 24px; height: 18px; background: linear-gradient(45deg, #4299e1, #3182ce); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: white;">
                                    üé¨</div>
                            </div>
                            <div class="element-label">Th√™m Video</div>
                        </div>
                        <div class="element-item" data-element="avatar">
                            <div class="element-icon" style="font-size: 20px;">üë§</div>
                            <div class="element-label">Avatar</div>
                        </div>
                    </div>
                </div>

                <!-- Basic Shapes -->
                <div class="element-category">
                    <div class="category-title">üî∑ H√¨nh C∆° b·∫£n</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="rectangle">
                            <div class="element-icon">
                                <div class="shape-rectangle"
                                    style="width: 24px; height: 16px; background: linear-gradient(45deg, #667eea, #764ba2); border-radius: 4px;">
                                </div>
                            </div>
                            <div class="element-label">H√¨nh ch·ªØ nh·∫≠t</div>
                        </div>
                        <div class="element-item" data-element="circle">
                            <div class="element-icon">
                                <div class="shape-circle"
                                    style="width: 24px; height: 24px; background: linear-gradient(45deg, #48bb78, #38a169); border-radius: 50%;">
                                </div>
                            </div>
                            <div class="element-label">H√¨nh tr√≤n</div>
                        </div>
                        <div class="element-item" data-element="triangle">
                            <div class="element-icon">
                                <div class="shape-triangle"
                                    style="width: 0; height: 0; border-left: 12px solid transparent; border-right: 12px solid transparent; border-bottom: 20px solid #f56565;">
                                </div>
                            </div>
                            <div class="element-label">H√¨nh tam gi√°c</div>
                        </div>
                        <div class="element-item" data-element="line">
                            <div class="element-icon">
                                <div class="shape-line"
                                    style="width: 30px; height: 3px; background: linear-gradient(90deg, #ed8936, #f6ad55); border-radius: 2px;">
                                </div>
                            </div>
                            <div class="element-label">ƒê∆∞·ªùng k·∫ª</div>
                        </div>
                        <div class="element-item" data-element="square">
                            <div class="element-icon">
                                <div class="shape-square"
                                    style="width: 20px; height: 20px; background: linear-gradient(45deg, #9f7aea, #805ad5); border-radius: 2px;">
                                </div>
                            </div>
                            <div class="element-label">H√¨nh vu√¥ng</div>
                        </div>
                        <div class="element-item" data-element="oval">
                            <div class="element-icon">
                                <div class="shape-oval"
                                    style="width: 30px; height: 18px; background: linear-gradient(45deg, #38b2ac, #319795); border-radius: 50%;">
                                </div>
                            </div>
                            <div class="element-label">H√¨nh b·∫ßu d·ª•c</div>
                        </div>
                        <div class="element-item" data-element="diamond">
                            <div class="element-icon">
                                <div class="shape-diamond"
                                    style="width: 20px; height: 20px; background: #e53e3e; transform: rotate(45deg);">
                                </div>
                            </div>
                            <div class="element-label">H√¨nh thoi</div>
                        </div>
                        <div class="element-item" data-element="hexagon">
                            <div class="element-icon" style="font-size: 18px; color: #667eea;">‚¨°</div>
                            <div class="element-label">L·ª•c gi√°c</div>
                        </div>
                        <div class="element-item" data-element="pentagon">
                            <div class="element-icon" style="font-size: 18px; color: #48bb78;">‚¨ü</div>
                            <div class="element-label">Ng≈© gi√°c</div>
                        </div>
                    </div>
                </div>

                <!-- Arrows & Directions -->
                <div class="element-category">
                    <div class="category-title">‚û°Ô∏è M≈©i t√™n & Ch·ªâ d·∫´n</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="arrow-right">
                            <div class="element-icon" style="font-size: 20px; color: #4299e1;">‚Üí</div>
                            <div class="element-label">Ph·∫£i</div>
                        </div>
                        <div class="element-item" data-element="arrow-left">
                            <div class="element-icon" style="font-size: 20px; color: #4299e1;">‚Üê</div>
                            <div class="element-label">Tr√°i</div>
                        </div>
                        <div class="element-item" data-element="arrow-up">
                            <div class="element-icon" style="font-size: 20px; color: #4299e1;">‚Üë</div>
                            <div class="element-label">L√™n</div>
                        </div>
                        <div class="element-item" data-element="arrow-down">
                            <div class="element-icon" style="font-size: 20px; color: #4299e1;">‚Üì</div>
                            <div class="element-label">Xu·ªëng</div>
                        </div>
                        <div class="element-item" data-element="arrow-curved">
                            <div class="element-icon" style="font-size: 20px; color: #667eea;">‚Ü™</div>
                            <div class="element-label">Cong</div>
                        </div>
                        <div class="element-item" data-element="arrow-double">
                            <div class="element-icon" style="font-size: 20px; color: #ed8936;">‚áÑ</div>
                            <div class="element-label">ƒê√¥i</div>
                        </div>
                        <div class="element-item" data-element="arrow-thick">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">‚û§</div>
                            <div class="element-label">D√†y</div>
                        </div>
                        <div class="element-item" data-element="arrow-circle">
                            <div class="element-icon" style="font-size: 20px; color: #9f7aea;">‚ü≤</div>
                            <div class="element-label">V√≤ng tr√≤n</div>
                        </div>
                        <div class="element-item" data-element="arrow-diagonal">
                            <div class="element-icon" style="font-size: 20px; color: #f56565;">‚Üó</div>
                            <div class="element-label">Ch√©o</div>
                        </div>
                    </div>
                </div>

                <!-- Symbols & Icons -->
                <div class="element-category">
                    <div class="category-title">üé® Symbols & Icons</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="star">
                            <div class="element-icon" style="font-size: 20px; color: #ffd700;">‚≠ê</div>
                            <div class="element-label">Ng√¥i sao</div>
                        </div>
                        <div class="element-item" data-element="star-outline">
                            <div class="element-icon" style="font-size: 20px; color: #ffd700;">‚òÜ</div>
                            <div class="element-label">Vi·ªÅn sao</div>
                        </div>
                        <div class="element-item" data-element="heart">
                            <div class="element-icon" style="font-size: 20px; color: #e53e3e;">‚ù§Ô∏è</div>
                            <div class="element-label">Tr√°i tim</div>
                        </div>
                        <div class="element-item" data-element="heart-outline">
                            <div class="element-icon" style="font-size: 20px; color: #e53e3e;">‚ô°</div>
                            <div class="element-label">Vi·ªÅn tim</div>
                        </div>
                        <div class="element-item" data-element="check">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">‚úì</div>
                            <div class="element-label">T√≠ch V</div>
                        </div>
                        <div class="element-item" data-element="cross">
                            <div class="element-icon" style="font-size: 20px; color: #f56565;">‚úó</div>
                            <div class="element-label">D·∫•u X</div>
                        </div>
                        <div class="element-item" data-element="plus">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">‚ûï</div>
                            <div class="element-label">C·ªông</div>
                        </div>
                        <div class="element-item" data-element="minus">
                            <div class="element-icon" style="font-size: 20px; color: #f56565;">‚ûñ</div>
                            <div class="element-label">Tr·ª´</div>
                        </div>
                        <div class="element-item" data-element="exclamation">
                            <div class="element-icon" style="font-size: 20px; color: #ed8936;">‚ùó</div>
                            <div class="element-label">C·∫£nh b√°o</div>
                        </div>
                        <div class="element-item" data-element="question">
                            <div class="element-icon" style="font-size: 20px; color: #4299e1;">‚ùì</div>
                            <div class="element-label">H·ªèi ch·∫•m</div>
                        </div>
                        <div class="element-item" data-element="info">
                            <div class="element-icon" style="font-size: 20px; color: #3182ce;">‚ÑπÔ∏è</div>
                            <div class="element-label">Th√¥ng tin</div>
                        </div>
                        <div class="element-item" data-element="thumbs-up">
                            <div class="element-icon" style="font-size: 20px;">üëç</div>
                            <div class="element-label">Th√≠ch</div>
                        </div>
                    </div>
                </div>

                <!-- Business & Office -->
                <div class="element-category">
                    <div class="category-title">üíº Business & Office</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="lightbulb">
                            <div class="element-icon" style="font-size: 20px; color: #ed8936;">üí°</div>
                            <div class="element-label">√ù t∆∞·ªüng</div>
                        </div>
                        <div class="element-item" data-element="target">
                            <div class="element-icon" style="font-size: 20px; color: #e53e3e;">üéØ</div>
                            <div class="element-label">M·ª•c ti√™u</div>
                        </div>
                        <div class="element-item" data-element="rocket">
                            <div class="element-icon" style="font-size: 20px; color: #667eea;">üöÄ</div>
                            <div class="element-label">T√™n l·ª≠a</div>
                        </div>
                        <div class="element-item" data-element="trophy">
                            <div class="element-icon" style="font-size: 20px; color: #ffd700;">üèÜ</div>
                            <div class="element-label">C√∫p</div>
                        </div>
                        <div class="element-item" data-element="medal">
                            <div class="element-icon" style="font-size: 20px; color: #ffd700;">üèÖ</div>
                            <div class="element-label">Huy ch∆∞∆°ng</div>
                        </div>
                        <div class="element-item" data-element="briefcase">
                            <div class="element-icon" style="font-size: 20px; color: #4a5568;">üíº</div>
                            <div class="element-label">C·∫∑p</div>
                        </div>
                        <div class="element-item" data-element="graph">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">üìà</div>
                            <div class="element-label">TƒÉng tr∆∞·ªüng</div>
                        </div>
                        <div class="element-item" data-element="calendar">
                            <div class="element-icon" style="font-size: 20px; color: #3182ce;">üìÖ</div>
                            <div class="element-label">L·ªãch</div>
                        </div>
                        <div class="element-item" data-element="clock">
                            <div class="element-icon" style="font-size: 20px; color: #718096;">üïê</div>
                            <div class="element-label">ƒê·ªìng h·ªì</div>
                        </div>
                        <div class="element-item" data-element="money">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">üí∞</div>
                            <div class="element-label">Ti·ªÅn</div>
                        </div>
                        <div class="element-item" data-element="handshake">
                            <div class="element-icon" style="font-size: 20px;">ü§ù</div>
                            <div class="element-label">H·ª£p t√°c</div>
                        </div>
                        <div class="element-item" data-element="key">
                            <div class="element-icon" style="font-size: 20px; color: #ed8936;">üîë</div>
                            <div class="element-label">Ch√¨a kh√≥a</div>
                        </div>
                    </div>
                </div>

                <!-- Technology -->
                <div class="element-category">
                    <div class="category-title">üíª Technology</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="laptop">
                            <div class="element-icon" style="font-size: 20px; color: #4a5568;">üíª</div>
                            <div class="element-label">Laptop</div>
                        </div>
                        <div class="element-item" data-element="phone">
                            <div class="element-icon" style="font-size: 20px; color: #3182ce;">üì±</div>
                            <div class="element-label">ƒêi·ªán tho·∫°i</div>
                        </div>
                        <div class="element-item" data-element="wifi">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">üì∂</div>
                            <div class="element-label">WiFi</div>
                        </div>
                        <div class="element-item" data-element="database">
                            <div class="element-icon" style="font-size: 20px; color: #667eea;">üóÑÔ∏è</div>
                            <div class="element-label">C∆° s·ªü d·ªØ li·ªáu</div>
                        </div>
                        <div class="element-item" data-element="cloud">
                            <div class="element-icon" style="font-size: 20px; color: #90cdf4;">‚òÅÔ∏è</div>
                            <div class="element-label">ƒê√°m m√¢y</div>
                        </div>
                        <div class="element-item" data-element="gear">
                            <div class="element-icon" style="font-size: 20px; color: #718096;">‚öôÔ∏è</div>
                            <div class="element-label">C√†i ƒë·∫∑t</div>
                        </div>
                        <div class="element-item" data-element="code">
                            <div class="element-icon" style="font-size: 20px; color: #2d3748;">üíª</div>
                            <div class="element-label">Code</div>
                        </div>
                        <div class="element-item" data-element="bug">
                            <div class="element-icon" style="font-size: 20px; color: #f56565;">üêõ</div>
                            <div class="element-label">L·ªói</div>
                        </div>
                        <div class="element-item" data-element="shield">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">üõ°Ô∏è</div>
                            <div class="element-label">B·∫£o m·∫≠t</div>
                        </div>
                    </div>
                </div>

                <!-- Nature & Weather -->
                <div class="element-category">
                    <div class="category-title">üåø Nature & Weather</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="sun">
                            <div class="element-icon" style="font-size: 20px; color: #ffd700;">‚òÄÔ∏è</div>
                            <div class="element-label">M·∫∑t tr·ªùi</div>
                        </div>
                        <div class="element-item" data-element="moon">
                            <div class="element-icon" style="font-size: 20px; color: #a0aec0;">üåô</div>
                            <div class="element-label">M·∫∑t trƒÉng</div>
                        </div>
                        <div class="element-item" data-element="tree">
                            <div class="element-icon" style="font-size: 20px; color: #48bb78;">üå≥</div>
                            <div class="element-label">C√¢y</div>
                        </div>
                        <div class="element-item" data-element="flower">
                            <div class="element-icon" style="font-size: 20px; color: #f093fb;">üå∏</div>
                            <div class="element-label">Hoa</div>
                        </div>
                        <div class="element-item" data-element="leaf">
                            <div class="element-icon" style="font-size: 20px; color: #38a169;">üçÉ</div>
                            <div class="element-label">L√°</div>
                        </div>
                        <div class="element-item" data-element="fire">
                            <div class="element-icon" style="font-size: 20px; color: #ed8936;">üî•</div>
                            <div class="element-label">L·ª≠a</div>
                        </div>
                        <div class="element-item" data-element="water">
                            <div class="element-icon" style="font-size: 20px; color: #3182ce;">üíß</div>
                            <div class="element-label">N∆∞·ªõc</div>
                        </div>
                        <div class="element-item" data-element="lightning">
                            <div class="element-icon" style="font-size: 20px; color: #ffd700;">‚ö°</div>
                            <div class="element-label">S√©t</div>
                        </div>
                        <div class="element-item" data-element="rainbow">
                            <div class="element-icon" style="font-size: 20px;">üåà</div>
                            <div class="element-label">C·∫ßu v·ªìng</div>
                        </div>
                    </div>
                </div>

                <!-- People & Emotions -->
                <div class="element-category">
                    <div class="category-title">üòä People & Emotions</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="avatar">
                            <div class="element-icon" style="font-size: 20px;">üë§</div>
                            <div class="element-label">Avatar</div>
                        </div>
                        <div class="element-item" data-element="team">
                            <div class="element-icon" style="font-size: 20px;">üë•</div>
                            <div class="element-label">ƒê·ªôi b√≥ng</div>
                        </div>
                        <div class="element-item" data-element="smile">
                            <div class="element-icon" style="font-size: 20px;">üòä</div>
                            <div class="element-label">Vui</div>
                        </div>
                        <div class="element-item" data-element="thinking">
                            <div class="element-icon" style="font-size: 20px;">ü§î</div>
                            <div class="element-label">Suy nghƒ©</div>
                        </div>
                        <div class="element-item" data-element="celebration">
                            <div class="element-icon" style="font-size: 20px;">üéâ</div>
                            <div class="element-label">ƒÇn m·ª´ng</div>
                        </div>
                        <div class="element-item" data-element="eyes">
                            <div class="element-icon" style="font-size: 20px;">üëÄ</div>
                            <div class="element-label">M·∫Øt</div>
                        </div>
                        <div class="element-item" data-element="brain">
                            <div class="element-icon" style="font-size: 20px;">üß†</div>
                            <div class="element-label">N√£o</div>
                        </div>
                        <div class="element-item" data-element="muscle">
                            <div class="element-icon" style="font-size: 20px;">üí™</div>
                            <div class="element-label">M·∫°nh m·∫Ω</div>
                        </div>
                        <div class="element-item" data-element="clap">
                            <div class="element-icon" style="font-size: 20px;">üëè</div>
                            <div class="element-label">V·ªó tay</div>
                        </div>
                    </div>
                </div>

                <!-- Charts & Diagrams -->
                <div class="element-category">
                    <div class="category-title">üìä Charts</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="bar-chart">
                            <div class="element-icon">
                                <div class="chart-placeholder"
                                    style="width: 24px; height: 18px; background: linear-gradient(45deg, #48bb78, #38a169); border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: white;">
                                    üìä</div>
                            </div>
                            <div class="element-label">Bi·ªÉu ƒë·ªì c·ªôt</div>
                        </div>
                        <div class="element-item" data-element="pie-chart">
                            <div class="element-icon">
                                <div class="chart-placeholder"
                                    style="width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(45deg, #ed8936, #f6ad55); display: flex; align-items: center; justify-content: center; font-size: 12px; color: white;">
                                    ü•ß</div>
                            </div>
                            <div class="element-label">Bi·ªÉu ƒë·ªì tr√≤n</div>
                        </div>
                        <div class="element-item" data-element="progress-bar">
                            <div class="element-icon" style="font-size: 16px; color: #4299e1;">‚ñì‚ñì‚ñì‚ñë‚ñë</div>
                            <div class="element-label">Ti·∫øn ƒë·ªô</div>
                        </div>
                    </div>
                </div>

                <!-- Decorative Elements -->
                <div class="element-category">
                    <div class="category-title">‚ú® Decorative</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="badge">
                            <div class="element-icon" style="font-size: 16px; color: #667eea;">üè∑Ô∏è</div>
                            <div class="element-label">Huy hi·ªáu</div>
                        </div>
                        <div class="element-item" data-element="divider">
                            <div class="element-icon">
                                <div
                                    style="width: 24px; height: 2px; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 1px;">
                                </div>
                            </div>
                            <div class="element-label">ƒê∆∞·ªùng ph√¢n c√°ch</div>
                        </div>
                        <div class="element-item" data-element="quote-box">
                            <div class="element-icon" style="font-size: 16px; color: #718096;">üí¨</div>
                            <div class="element-label">H·ªôp tr√≠ch d·∫´n</div>
                        </div>
                        <div class="element-item" data-element="sparkle">
                            <div class="element-icon" style="font-size: 18px; color: #ffd700;">‚ú®</div>
                            <div class="element-label">L·∫•p l√°nh</div>
                        </div>
                        <div class="element-item" data-element="crown">
                            <div class="element-icon" style="font-size: 18px; color: #ed8936;">üëë</div>
                            <div class="element-label">V∆∞∆°ng mi·ªán</div>
                        </div>
                        <div class="element-item" data-element="gem">
                            <div class="element-icon" style="font-size: 18px; color: #9f7aea;">üíé</div>
                            <div class="element-label">ƒê√° qu√Ω</div>
                        </div>
                        <div class="element-item" data-element="confetti">
                            <div class="element-icon" style="font-size: 18px;">üéä</div>
                            <div class="element-label">Ph√°o gi·∫•y</div>
                        </div>
                        <div class="element-item" data-element="ribbon">
                            <div class="element-icon" style="font-size: 18px; color: #e53e3e;">üéÄ</div>
                            <div class="element-label">Ruy bƒÉng</div>
                        </div>
                        <div class="element-item" data-element="frame">
                            <div class="element-icon" style="font-size: 18px; color: #8b5a3c;">üñºÔ∏è</div>
                            <div class="element-label">Khung</div>
                        </div>
                    </div>
                </div>

                <!-- Food & Objects -->
                <div class="element-category">
                    <div class="category-title">üçé Food & Objects</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="coffee">
                            <div class="element-icon" style="font-size: 18px; color: #8b5a3c;">‚òï</div>
                            <div class="element-label">C√† ph√™</div>
                        </div>
                        <div class="element-item" data-element="pizza">
                            <div class="element-icon" style="font-size: 18px;">üçï</div>
                            <div class="element-label">Pizza</div>
                        </div>
                        <div class="element-item" data-element="apple">
                            <div class="element-icon" style="font-size: 18px;">üçé</div>
                            <div class="element-label">T√°o</div>
                        </div>
                        <div class="element-item" data-element="cake">
                            <div class="element-icon" style="font-size: 18px;">üéÇ</div>
                            <div class="element-label">B√°nh</div>
                        </div>
                        <div class="element-item" data-element="book">
                            <div class="element-icon" style="font-size: 18px;">üìö</div>
                            <div class="element-label">S√°ch</div>
                        </div>
                        <div class="element-item" data-element="music">
                            <div class="element-icon" style="font-size: 18px; color: #667eea;">üéµ</div>
                            <div class="element-label">Nh·∫°c</div>
                        </div>
                        <div class="element-item" data-element="gift">
                            <div class="element-icon" style="font-size: 18px;">üéÅ</div>
                            <div class="element-label">Qu√†</div>
                        </div>
                        <div class="element-item" data-element="balloon">
                            <div class="element-icon" style="font-size: 18px;">üéà</div>
                            <div class="element-label">B√≥ng bay</div>
                        </div>
                        <div class="element-item" data-element="diamond-shape">
                            <div class="element-icon" style="font-size: 18px; color: #9f7aea;">‚ô¶Ô∏è</div>
                            <div class="element-label">Kim c∆∞∆°ng</div>
                        </div>
                    </div>
                </div>

                <!-- Mathematical & Scientific -->
                <div class="element-category">
                    <div class="category-title">üî¢ Math & Science</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="infinity">
                            <div class="element-icon" style="font-size: 18px; color: #667eea;">‚àû</div>
                            <div class="element-label">V√¥ c·ª±c</div>
                        </div>
                        <div class="element-item" data-element="pi">
                            <div class="element-icon" style="font-size: 18px; color: #48bb78;">œÄ</div>
                            <div class="element-label">Pi</div>
                        </div>
                        <div class="element-item" data-element="sum">
                            <div class="element-icon" style="font-size: 18px; color: #ed8936;">Œ£</div>
                            <div class="element-label">T·ªïng</div>
                        </div>
                        <div class="element-item" data-element="delta">
                            <div class="element-icon" style="font-size: 18px; color: #f56565;">Œî</div>
                            <div class="element-label">Delta</div>
                        </div>
                        <div class="element-item" data-element="alpha">
                            <div class="element-icon" style="font-size: 18px; color: #9f7aea;">Œ±</div>
                            <div class="element-label">Alpha</div>
                        </div>
                        <div class="element-item" data-element="beta">
                            <div class="element-icon" style="font-size: 18px; color: #3182ce;">Œ≤</div>
                            <div class="element-label">Beta</div>
                        </div>
                        <div class="element-item" data-element="microscope">
                            <div class="element-icon" style="font-size: 18px;">üî¨</div>
                            <div class="element-label">Nghi√™n c·ª©u</div>
                        </div>
                        <div class="element-item" data-element="atom">
                            <div class="element-icon" style="font-size: 18px;">‚öõÔ∏è</div>
                            <div class="element-label">Nguy√™n t·ª≠</div>
                        </div>
                        <div class="element-item" data-element="dna">
                            <div class="element-icon" style="font-size: 18px;">üß¨</div>
                            <div class="element-label">DNA</div>
                        </div>
                    </div>
                </div>

                <!-- Transportation -->
                <div class="element-category">
                    <div class="category-title">üöó Transportation</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="car">
                            <div class="element-icon" style="font-size: 18px;">üöó</div>
                            <div class="element-label">√î t√¥</div>
                        </div>
                        <div class="element-item" data-element="airplane">
                            <div class="element-icon" style="font-size: 18px;">‚úàÔ∏è</div>
                            <div class="element-label">M√°y bay</div>
                        </div>
                        <div class="element-item" data-element="train">
                            <div class="element-icon" style="font-size: 18px;">üöÜ</div>
                            <div class="element-label">T√†u h·ªèa</div>
                        </div>
                        <div class="element-item" data-element="bike">
                            <div class="element-icon" style="font-size: 18px;">üö≤</div>
                            <div class="element-label">Xe ƒë·∫°p</div>
                        </div>
                        <div class="element-item" data-element="ship">
                            <div class="element-icon" style="font-size: 18px;">üö¢</div>
                            <div class="element-label">T√†u th·ªßy</div>
                        </div>
                        <div class="element-item" data-element="bus">
                            <div class="element-icon" style="font-size: 18px;">üöå</div>
                            <div class="element-label">Xe bu√Ωt</div>
                        </div>
                        <div class="element-item" data-element="motorcycle">
                            <div class="element-icon" style="font-size: 18px;">üèçÔ∏è</div>
                            <div class="element-label">Xe m√°y</div>
                        </div>
                        <div class="element-item" data-element="helicopter">
                            <div class="element-icon" style="font-size: 18px;">üöÅ</div>
                            <div class="element-label">Tr·ª±c thƒÉng</div>
                        </div>
                        <div class="element-item" data-element="satellite">
                            <div class="element-icon" style="font-size: 18px;">üõ∞Ô∏è</div>
                            <div class="element-label">V·ªá tinh</div>
                        </div>
                    </div>
                </div>

                <!-- Sports & Activities -->
                <div class="element-category">
                    <div class="category-title">‚öΩ Sports & Activities</div>
                    <div class="element-grid">
                        <div class="element-item" data-element="soccer">
                            <div class="element-icon" style="font-size: 18px;">‚öΩ</div>
                            <div class="element-label">B√≥ng ƒë√°</div>
                        </div>
                        <div class="element-item" data-element="basketball">
                            <div class="element-icon" style="font-size: 18px;">üèÄ</div>
                            <div class="element-label">B√≥ng r·ªï</div>
                        </div>
                        <div class="element-item" data-element="tennis">
                            <div class="element-icon" style="font-size: 18px;">üéæ</div>
                            <div class="element-label">Qu·∫ßn v·ª£t</div>
                        </div>
                        <div class="element-item" data-element="golf">
                            <div class="element-icon" style="font-size: 18px;">‚õ≥</div>
                            <div class="element-label">Golf</div>
                        </div>
                        <div class="element-item" data-element="swimming">
                            <div class="element-icon" style="font-size: 18px;">üèä</div>
                            <div class="element-label">B∆°i l·ªôi</div>
                        </div>
                        <div class="element-item" data-element="running">
                            <div class="element-icon" style="font-size: 18px;">üèÉ</div>
                            <div class="element-label">Ch·∫°y b·ªô</div>
                        </div>
                        <div class="element-item" data-element="cycling">
                            <div class="element-icon" style="font-size: 18px;">üö¥</div>
                            <div class="element-label">ƒê·∫°p xe</div>
                        </div>
                        <div class="element-item" data-element="weightlifting">
                            <div class="element-icon" style="font-size: 18px;">üèãÔ∏è</div>
                            <div class="element-label">T·∫°</div>
                        </div>
                        <div class="element-item" data-element="yoga">
                            <div class="element-icon" style="font-size: 18px;">üßò</div>
                            <div class="element-label">Yoga</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="canvas-container" id="canvasContainer">
        <div class="canvas" id="canvas"></div>
        <!-- Drag and drop overlay -->
        <div class="drag-drop-overlay" id="dragDropOverlay">
            <div class="drag-drop-message">
                Th·∫£ ·∫£nh/video v√†o ƒë√¢y ƒë·ªÉ th√™m v√†o slide
            </div>
        </div>
        <!-- Snapping guides -->
        <div id="vertical-guide" class="guide-line vertical"></div>
        <div id="horizontal-guide" class="guide-line horizontal"></div>
        <!-- NEW: Distance measurement guides -->
        <div id="distance-guides-container">
            <div class="distance-line" id="dist-line-top"></div>
            <div class="distance-label" id="dist-label-top">0</div>
            <div class="distance-line" id="dist-line-right"></div>
            <div class="distance-label" id="dist-label-right">0</div>
            <div class="distance-line" id="dist-line-bottom"></div>
            <div class="distance-label" id="dist-label-bottom">0</div>
            <div class="distance-line" id="dist-line-left"></div>
            <div class="distance-label" id="dist-label-left">0</div>
        </div>
    </div>

    <div class="properties-panel" id="propertiesPanel">
        <h2 style="margin-bottom: 25px; color: #2d3748; font-weight: 700;">Thu·ªôc t√≠nh</h2>
        <div id="propertiesContent">
        </div>
    </div>

    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" data-action="group">Nh√≥m <span class="shortcut">Ctrl+G</span></div>
        <div class="context-menu-item" data-action="ungroup">B·ªè nh√≥m <span class="shortcut">Ctrl+Shift+G</span></div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" data-action="connectElements">N·ªëi b·∫±ng ƒë∆∞·ªùng k·∫ª</div>
        <div class="context-menu-item" data-action="disconnectLine">Ng·∫Øt k·∫øt n·ªëi</div>
        <div class="context-menu-item" data-action="changeConnectorType">ƒê·ªïi ki·ªÉu ƒë∆∞·ªùng k·∫ª</div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" data-action="copy">Sao ch√©p <span class="shortcut">Ctrl+C</span></div>
        <div class="context-menu-item" data-action="paste">D√°n <span class="shortcut">Ctrl+V</span></div>
        <div class="context-menu-item" data-action="duplicate">Nh√¢n b·∫£n <span class="shortcut">Ctrl+D</span></div>
        <div class="context-menu-item" data-action="delete">X√≥a <span class="shortcut">Del</span></div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" data-action="bringForward">ƒê∆∞a l√™n tr√™n</div>
        <div class="context-menu-item" data-action="sendBackward">G·ª≠i xu·ªëng d∆∞·ªõi</div>
    </div>

    <!-- Connector Type Selector -->
    <div class="connector-type-selector" id="connectorTypeSelector">
        <div class="selector-section">
            <h4>Ki·ªÉu ƒë∆∞·ªùng k·∫ª</h4>
            <div class="selector-row">
                <button data-type="straight" class="active">üìè Th·∫≥ng</button>
                <button data-type="curved">üåä Cong</button>
                <button data-type="step">‚ö° G·∫•p kh√∫c</button>
            </div>
            <div class="selector-row">
                <button data-type="dashed">‚öä N√©t ƒë·ª©t</button>
                <button data-type="dotted">‚ö™ Ch·∫•m</button>
                <button data-type="thick">‚ñ† D√†y</button>
            </div>
        </div>
        <div class="selector-section">
            <h4>Ki·ªÉu m≈©i t√™n</h4>
            <div class="selector-row">
                <button data-arrow="forward" class="active">‚û°Ô∏è Xu√¥i</button>
                <button data-arrow="backward">‚¨ÖÔ∏è Ng∆∞·ª£c</button>
                <button data-arrow="both">‚¨ÖÔ∏è‚û°Ô∏è C·∫£ hai</button>
            </div>
            <div class="selector-row">
                <button data-arrow="none">‚îÅ Kh√¥ng</button>
                <button data-arrow="circle">‚≠ï Tr√≤n</button>
                <button data-arrow="diamond">‚ô¶Ô∏è H√¨nh thoi</button>
            </div>
            <div class="selector-row">
                <button data-arrow="square">‚¨õ H√¨nh vu√¥ng</button>
            </div>
        </div>
    </div>

    <div class="zoom-controls">
        <button class="zoom-btn" id="zoomOut">‚àí</button>
        <div class="zoom-level" id="zoomLevel">V·ª´a</div>
        <button class="zoom-btn" id="zoomIn">+</button>
    </div>


    <!-- Editor Script - ES6 Modules -->
    <script type="module">
        // Force reload editor.js with NEW FILENAME to bypass cache
        const editorScript = document.createElement('script');
        editorScript.src = `js/editor-new-1765301429.js`;
        editorScript.noModule = true;
        document.body.appendChild(editorScript);

        console.log('‚ö° Starting dynamic import of init.js...');
        // Force reload init.js with timestamp + random to bypass aggressive cache
        const bust = Date.now() + Math.random();
        import(`./js/init/init.js?v=${bust}`)
            .then(() => console.log('‚úÖ init.js imported successfully'))
            .catch(err => console.error('‚ùå Failed to import init.js:', err));
    </script>
</body>

</html>